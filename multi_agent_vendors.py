import difflib
import random

import openai
import re

import secrets

# Initialize OpenAI API key
openai.api_key = secrets.api_key_openai

# List of already known IoT manufacturers (for demonstration purposes, this list can be empty or pre-filled)
known_iot_manufacturers = [
    'Apple', 'Google', 'Samsung', 'Amazon', 'Microsoft', 'Huawei', 'Xiaomi',
    'Sony', 'LG', 'Intel', 'Cisco', 'HP', 'IBM', 'Dell', 'Nokia', 'Bosch',
    'Siemens', 'Philips', 'Panasonic', 'Lenovo','TP-link'
]
device_categories = [
    "IP Camera", "Smart Device", "Smart Plug", "Light", "Voice Control", "Thermostat",
    "Power System", "Solar Panel", "Smart Meter", "HVAC", "Smart Appliance",
    "Smart Washer", "Smart Fridge", "Smart Cleaner", "Sleep Tech", "Garage Door",
    "Sprinkler", "Electric", "Doorbell", "Smart Lock", "Touch Panel", "Controller",
    "Scale", "Toy", "Robot", "Weather Station", "Health Monitor", "Baby Monitor",
    "Pet Monitor", "Alarm", "Motion Detector", "Smoke Detector", "Water Sensor",
    "Sensor", "Domotz Box", "Media Player", "Television", "Game Console",
    "Streaming Dongle", "Speaker/Amp", "Photo Camera", "Photo Display", "Projector"
]

# Initialize agents
agent1 = "gpt-4o"
agent2 = "gpt-4o"

# Load the missing manufacturers from the test list for reference
missing_manufacturers_file = 'vendors_list_updated.csv'
with open(missing_manufacturers_file, 'r') as file:
    missing_manufacturers = [line.strip() for line in file.readlines()]


# Coordinator class
class Coordinator:
    def __init__(self, agent1, agent2):
        self.agent1 = agent1
        self.agent2 = agent2
        self.manufacturers_set = set(
            [self.standardize_name(m) for m in known_iot_manufacturers])  # Unique manufacturers
        self.original_manufacturers = [self.standardize_name(m) for m in
                                       known_iot_manufacturers]  # Original names for prompts
        self.suggested_manufacturers = set()  # Track suggested manufacturers to avoid repetition
        self.categories_iter = iter(device_categories)  # Iterator for categories

    def standardize_name(self, name):
        return re.sub(r'[^a-zA-Z0-9\s-]', '', name).lower()

    def generate_manufacturers(self, agent, prompt):
        response = openai.ChatCompletion.create(
            model=agent,
            messages=[{"role": "system",
                       "content": "You are an AI that lists IoT manufacturers. Examples of IoT manufacturers include companies like amazon,wemo, xiaomi, and pixstar. Examples of IoT devices include smart thermostats, TVs, sensors, streamers, printers smart speakers, smart lights, and smart security cameras."},
                      {"role": "user", "content": prompt}]
        )
        content = response.choices[0].message['content']
        # Extract the list from the content
        return re.findall(r'\d+\.\s*(.+)', content)  # Extract names without additional descriptions

    def provide_feedback(self):
        # Provide feedback to agents on the percentage of coverage
        missing_set = set([self.standardize_name(m) for m in missing_manufacturers])
        covered = self.manufacturers_set & missing_set
        coverage_percentage = (len(covered) / len(missing_set)) * 100
        return coverage_percentage

    def coordinate(self):
        round_num = 1
        while len(self.manufacturers_set) < 2000:  # Adjust the total number if necessary
            print(f"Round {round_num}:")
            if round_num % 2 == 1:
                agent = self.agent1
                agent_name = "Agent 1"
            else:
                agent = self.agent2
                agent_name = "Agent 2"

            coverage_percentage = self.provide_feedback()
            random.shuffle(self.original_manufacturers)  # Randomize the order of the original manufacturers

            if len(self.manufacturers_set) >= 1000:
                try:
                    category = next(self.categories_iter)
                except StopIteration:
                    break  # If no more categories, exit the loop
                prompt = f"Please list 50 unique IoT manufacturers that produce devices in the category: {category} and are not in this list: {', '.join(self.original_manufacturers)}. Do not repeat any previously mentioned manufacturers. Do not add any information or characters after the vendor name. Current coverage is approximately {coverage_percentage:.2f}% of known IoT manufacturers."
            else:
                prompt = f"Please list 50 unique IoT manufacturers that are not in this list: {', '.join(self.original_manufacturers)}. Do not repeat any previously mentioned manufacturers. Do not add any information or characters after the vendor name. Current coverage is approximately {coverage_percentage:.2f}% of known IoT manufacturers."

            new_manufacturers = self.generate_manufacturers(agent, prompt)

            standardized_new_manufacturers = []
            for m in new_manufacturers:
                standardized_name = self.standardize_name(m.strip())
                if standardized_name not in self.manufacturers_set:
                    standardized_new_manufacturers.append(standardized_name)
                    self.original_manufacturers.append(standardized_name)

            self.manufacturers_set.update(standardized_new_manufacturers)
            self.suggested_manufacturers.update(standardized_new_manufacturers)

            print(f"{agent_name} provided: {new_manufacturers}")
            print(f"Total manufacturers collected: {len(self.manufacturers_set)}\n")

            round_num += 1

        return self.manufacturers_set


# Initialize coordinator
coordinator = Coordinator(agent1, agent2)
final_manufacturers_list = coordinator.coordinate()

#final_manufacturers_list = {'medisana', 'deako', 'swann security', 'lockitron', 'magnetic', 'vanguard iot', 'lutron caseta', 'lumi united technology', 'superhub', 'gridconnect', 'polycom', 'qorvo inc', 'faraday technology', 'bryton inc', 'gloster', 'airthings', 'carriots', 'gainspan', 'nutanix', 'evenwell', 'tado', 'gigaspaces', 'amazon web services', 'fisens', 'osram', 'pura', 'azure iot', 'telenor connexion', 'mongoose', 'airmega', 'propeller health', 'wyze', 'comper healthcare', 'evrything retrojunkies', 'blueshift labs', 'yale linus smart lock', 'iconics', 'actyx', 'pebblebee', 'ptc inc', 'analogic corporation', 'noon', 'polecat', 'kuzzle', 'safera', 'smartsense', 'ic real tech', 'decentlab', 'scout alarm', 'allegion', 'kore telematics', 'iaeris', 'nokia growth partners', 'heatmiser', 'adt', 'aereo', 'stmicroelectronics', 'snowshoe', 'origin wireless', 'dito', 'sonos', 'miro', 'mios', 'canary', 'samsara networks', 'ring stick up cam', 'ge appliances', 'thalma', 'beveco', 'juno', 'electrocompaniet', 'azpen innovations', 'triacle', 'currant', 'western digital', 'dell boomi', 'abode', 'temboo', 'wyrestorm', 'legrand', 'bodytrak', 'people power', 'bevik', 'simplisafe', 'presence security', 'flexity', 'andon health', 'kavada', 'gemnet', 'camiot', 'lg electronics', 'alarmcom', 'recon instruments', 'atollic', 'netvox', 'asus', 'leviton', 'forescout technologies', 'amplia', 'petpace', 'stanford-clark', 'homeseer', 'lignum', 'inmarsat', 'lockly', 'pycom', 'frient', 'control-24', 'quirky', 'first alert onelink', 'climote', 'hubitat elevation', 'nanoleaf smarter', 'gigaset', 'vesper technologies', 'veego', 'sensorfact', 'cozy', 'netmore', 'latch', 'hubble connected', 'mysa', 'gabb wireless', 'govee', 'muzzley', 'digi sensors', 'swann smart security', 'amcrest', 'mcp sensor', 'universal devices', 'authom', 'umanlife', 'cumulocity', 'beehome technologies', 'byton', 'konux', 'ivycorp', 'ruckus networks', 'capgeminis xiot', 'digicert', 'dataart', 'koogeek', 'insteon', 'aziot', 'mistbase', 'exosite iot alliance', 'aura', 'plejd', 'jasco products', 'stanley healthcare', 'hesperus industries', 'cujo ai', 'lumenradio', 'azpen innovation', 'roost smart water leak', 'parrot', 'siemens', 'watteco', 'navvis', 'ocado smart platform', 'texas instruments inc', 'lg', 'leaksmart', 'ooma', 'faststream technologies', 'deepstreamhub', 'emberwave', 'emerson electric', 'esensors', 'tp-link kasa', 'viessmann', 'karamba security', 'r-style lab', 'osmosis', 'hitachi vantara', 'actian corporation', 'zyxel', 'elan', 'mysmartblinds', 'linksys', 'zte', 'rapidsoft technologies', 'precognize', 'dell', 'animatics', 'eight sleep', 'ivensense', 'luxonis', 'sonoff', 'nyrius', 'atmel', 'amdocs', 'enlighted inc', 'anova smart cooker', 'telit iot platform', 'orbi', 'ihome control', 'accton technology corporation', 'metromile', 'smarthomecom', 'mender', 'hiber', 'halo smart labs', 'zmodo', 'danalock', 'axis communications', 'open connectivity foundation ocf', 'the things network', 'google llc', 'samsung electronics', 'lifx smart bulb', 'lifeshield', 'nuki home solutions', 'shelly', 'sequitur labs', 'master lock', 'blue pillar', 'centero', 'canary pro', 'terrago', 'ezviz', 'splunk', 'aloysius', 'blackberry', 'honeywell', 'att smart home', 'its ai', 'haier', 'hydropoint', 'atrack technology inc', 'alibaba cloud', 'senic', 'carrier cor', 'lascar electronics', 'vuzix', 'visonic', 'sharp', 'grid4c', 'pepper', 'ibaby labs', 'swift navigation', 'thingworx', 'nokia corporation', 'silver spring networks', 'riverdi', 'eprosima', 'moesgo', 'memomi', 'rendever', 'aquanta', 'rohm semiconductor', 'eufy', 'petwador', 'audi', 'kaaiot technologies llc', 'fibaro system', 'intel corporation', 'connectedyard', 'tibco software', 'eve home', 'adt inc', 'semtech corporation', 'kyocera', 'sevendreamers', 'zigbee', 'reelyactive', 'borniak', 'gerber technology', 'thingwatch', 'cloogy', 'coban global', 'logitech pop', 'moixa', 'machineshop', 'nanothings', 'glas', 'c3ai', 'maxlinear', 'ring doorbell', 'logitech smart home', 'mivatek', 'marvell technology group', 'anker', 'eset', 'cutting edge networked storage', 'guardian technologies', 'fortinet', 'wemo', 'eton', 'epistar corp', 'holtron', 'iclassic', 'nintendo', 'smartair', 'wellaware', 'varta storage', 'claravue', 'digi international', 'beluga', 'geeni', 'fitbark', 'august home', 'infineon technologies', 'nortek', 'logitech circle', 'atomi smart', 'extreme networks', 'finch', 'on semiconductor', 'sensara', 'altair semiconductor', 'smarthome', 'zte corporation', 'antel', 'trilliant', 'keepertech', 'hubitat simplified', 'borqs', 'halo', 'bug labs', 'bluesound', 'linksprite technologies', 'ge digital', 'hanwha techwin', 'advantech co ltd', 'ambarella', 'nova labs', 'deepleaper', 'afero', 'anker innovations', 'kevo', 'arm holdings', 'animus home', 'orbiwise', 'apple inc', 'att inc', 'ping identity', 'oprema', 'responsiv', 'kuri', 'roomme', 'iris by lowes', 'veea', 'energyhub', 'keen home', 'reno', 'wacom', 'eero', 'trane', 'delta display solutions', 'molex', 'smk-link', 'red hat', 'konekt', 'danfoss', 'idt integrated device technology', 'lambda', 'milesight', 'ice gateway', 'nexia home', 'arloid', 'luna', 'snaz infotech', 'helium', 'inspired homes', 'petcube', 'wisesec', 'flic', 'ge smart appliances', 'monohm', 'ericsson', 'devicepilot', 'hellotech', 'stir', 'att mobility', 'push controls', 'sensirion', 'flic smart button', 'ivx', 'dome', 'dji osmo', 'element iot', 'italtel', 'aftershokz', 'axxess identification', 'misty robotics', 'slideio', 'minut', 'soundwall', 'cambridge consultants', 'mode analytics', 'cartesiam', 'camio', 'ambiq micro', 'invensense', 'myoware', 'cumulocity iot', 'salesforce', 'biotrack', 'dcs', 'podo labs', 'ockam', 'emerson electric co', 'adoss', 'beijing unisoc technologies', 'noon smart lighting', 'motorola solutions', 'life360', 'switchbot', 'jasco', 'cidana', 'thermondo', 'fermata', 'jasper', 'sierra wireless', 'cubesensors', 'elgato', 'grundfos', 'emko elektronik', 'mydevices', 'borqs technologies', 'buddy app', 'sitesense', 'garrett motion', 'beko homewhiz', 'hortonworks', 'sprint', 'seco', 'flow labs', 'trackinno', 'externetworks', 'atek access technologies', 'lattice semiconductor', 'flo technologies', 'bionic limbs and technologies', 'echostar', 'mist systems', 'sensorpush', 'flexthink', 'armis', 'intesis', 'homedics', 'koninklijke philips nv', 'sonatafy technology', 'buddy platform', 'ocado', 'nxp semiconductors', 'cassia networks', 'samsung smartthings', 'thomson', 'circle with disney', 'fizz', 'philips hue', 'hive active heating', 'asustek', 'foresight', 'megasquirt', 'timespace', 'busy bee stars innovating', 'mikrotik', 'bsquare', 'sanders way', 'exponential power', 'vapor io', 'ecovent systems', 'contiki', 'cisco meraki', 'nicira', 'schneider electric', 'samsung electronics co ltd', 'fibocom', 'idigi', 'petnet smartfeeder', 'hanhaa', 'wink', 'bresser smart', 'extenison', 'rokid', 'adaptive wireless solutions', 'parrot sa', 'abode systems', 'crestron', 'ecobee', 'brunt', 'appmink', 'juganu', 'thunderboard', 'ihp', 'robowunderkind', 'endresshauser', 'sonoff smart switch', 'alcatel-lucent', 'centralite', 'coolkit', 'orbitkey', 'astute graphics', 'ecoisme', 'asus iot', 'efergy', 'essentium', 'pixstar', 'foxconn', 'adt security services', 'fantem', 'switchmate', 'vera control', 'thinglogix', 'machfu', 'brultech research', 'bb smartworx', 'atheer', 'mitsubishi electric', 'flo by moen', 'keywe', 'predicthq', 'actindi', 'nexia', 'moog crossbow', 'the things industries', 'owl insights', 'exosite', 'kaa iot', 'hewlett packard enterprise', 'mrv communications', 'blub0x', 'renesas electronics', 'cavli wireless', 'daikin', 'quantonium', 'silicon labs', 'meshify', 'plantronics', 'industrial network solutions', 'ptc thingworx', 'lime microsystems', 'logitek', 'seektech', 'navya', 'defital', 'vivint ping', 'orbit', 'eurotech', 'zone control', 'connectsense', 'cubic telecom', 'netgear orbi', 'oxbotica', 'clover network', 'duxtec', 'lenovo group limited', 'smanos', 'atrack lites', 'link interactive', 'xelto', 'fitpay', 'hanno', 'ixon', 'hager group', 'proscenic', 'sparkfun', 'soracom', 'contec', 'dyson', 'qolsys', 'hitachi-lg', 'zuznow', 'anaren', 'xperio', 'uib', 'steren', 'sphero', 'lightwave rf', 'zipdoctor', 'ambygear', 'silvaco', 'ataraxia iot', 'netburner', 'acuity brands inc', 'banyan hills', 'nvidia', 'canary flex', 'chongqing cochain technology', 'impinj', 'blink', 'nighthawk', 'raycore', 'thales', 'fillamentum', 'trusense', 'thingstream', 'firstnet', 'securifi', 'kii corporation', 'zen ecosystems', 'nash technologies', 'amazon alexa', 'idemia', 'throughtek', 'eliwell', 'kaon media', 'canary smart home', 'bellhawk systems', 'boxlock', 'kiuso', 'conbee', 'intellithings', 'dremel', 'savant', 'q 40', 'psi spa', 'moon by 1-ring', 'revolv', 'dashbot', 'qualcomm incorporated', 'crateio', 'airfy', 'emerson', 'keio', 'liteshade', 'coveloz technologies', 'device authority', 'bask', 'adext ai', 'jam digital', 'litmus', 'basedow hd security', 'ecostealth', 'garageio', 'corekinect', 'tocano', 'bitdefender box', 'konnected', 'wiz connected', 'aruba networks', 'idimcloud', 'emily engineering', 'accent systems', 'droplit', 'dbms consulting', 'lg electronics inc', 'furbo', 'eero home wifi', 'xiaoyi yi home', 'growatt', 'marathon technologies', 'askey computer corporation', 'b-hyve', 'helios technologies', 'autotalks', 'dahua', 'atmel corporation', 'zuli', 'ding', 'blinks home', 'wml system', 'tapplock', 'iobridge', 'cooab', 'honeydata', 'skydrop', 'leapline', 'wlink technology', 'smartrent', 'pi supply', 'big belly solar', 'ecolink', 'exawizards', 'anki', 'orexa', 'ils technology', 'walkabouts workwell', 'infinet wireless', 'smarthings', 'aloksak', 'hcl technologies', 'gosun', 'tempered networks', 'kallik', 'pepperlfuchs', 'harman', 'desk control', 'infiswift', 'sparkcognition', 'apigee', 'axonian', 'microchip technology', 'schlage smart lock', 'beakyn', 'dicon', 'ismartalarm', 'xtalents', 'orbweaver scribe', 'gree', 'broadcom inc', 'embedded wireless solutions', 'menderio', 'micasaverde', 'ion audio', 'landisgyr', 'rhino fleet tracking', 'movetime', 'room2room', 'nadine west', 'airangel', 'iobionics', 'dell emc', 'afero inc', 'hp inc', 'brck', 'argenox', 'vector', 'jolla', 'fibaro', 'aplix', 'vartiotech', 'justright surgical', 'azpen', 'indiegogo', 'pointgrab', 'bright health', 'revl', 'fenestrae', 'somfy', 'enfocus solutions', 'analogix semiconductor', 'blink home', 'caseta wireless', 'cirrent', 'reagle smart deadbolt', 'laird technologies', 'vmware', 'geberit', 'nico', 'heatworks', 'lucist', 'quirky spotter', 'influxdata', 'smapee', 'arista networks', 'eagle research corporation', 'bone', 'quantenna communications', 'airtame', 'blink smart cam', 'sony', 'humax', 'ceres tag', 'te connectivity', 'powertech', 'cisco systems', 'defendoor', 'lemur monitors', 'petnet', 'tendril', 'mazon dash', 'perytons', 'pulsar informatics', 'kaaiot', 'abb stotz kontakt', 'scheidt  bachmann', 'okkeluint', 'skylink', 'elinkthink', 'antelink', 'globeron', 'awear solutions', 'brilliant', 'avimesa', 'echelon', 'betterie', 'cisco jasper', 'gardena smart system', 'adt pulse', 'livinglab', 'arm', 'omron', 'atmosphere iot', 'leviton manufacturing', 'daintree networks', 'bluegiga technologies', 'secan', 'ewattch', 'nanotech', 'unisys', 'amd', 'bock technologies', 'lifx', 'airscale', 'pegasystems', 'simplehuman', 'boreas', 'covisint', 'altair', 'greenwave', 'anyware solutions', 'august capital', 'cel-fi', 'clevx llc', 'angee inc', 'ottom', 'kii', 'mesh blu', 'brio', 'microsoft', 'general devices', 'doremi', 'ingenu', 'trustleap', 'elsys', 'solaredge', 'awox', 'philips', 'lg thinq', 'pulse electronics', 'beagleboard', 'avtech', 'luxul', 'telemed', 'greenwave reality', 'iotech', 'silicon image', 'momenta', 'lasso-cfs', 'gemalto', 'lesswire', 'gocontrol', 'synaptics inc', 'trusted objects', 'okidokeys', 'pingthings', 'clearleaf', 'wink relay', 'clearblade', 'reality ai', 'fleet complete', 'plum life', 'ihealth', 'lux', 'hp', 'eden', 'idevices', 'flowtronic', 'stanley black  decker', 'goreenear', 'sense', 'netatmo security camera', 'devicetone', 'ariston net', 'vizio', 'gigaom technology', 'sooke', 'yamaha corporation', 'h3c', 'flex', 'kerlink', 'bond', 'microchip', 'cypress envirosystems', 'thingos', 'momento', 'arlo', 'xively', 'meross', 'rachio smart sprinkler', 'slockit', 'mydlink', 'anasecu', 'honeywell international inc', 'orsense', 'hologram', 'aleksey korhonen', 'branto', 'neato', 'benq', 'openenergymonitor', 'synexxus', 'ecovacs robotics', 'omni', 'zymbit', 'atmos', 'bosch', 'semtech', 'objenious', 'hai by leviton', 'sprue', 'biostamp', 'd-link omna', 'monnit corporation', 'orro', 'enocean gmbh', 'sam labs', 'frontier silicon', 'foghorn', 'people power company', 'asoka', 'e-con systems', 'cyberpower', 'netgear arlo', 'siemens healthineers', 'cognosos', 'razer', 'blue maestro', 'latch inc', 'brightai', 'enlighted', 'ember iot', 'venstar', 'ayatan sensors', 'airly', 'iyogi', 'geofeedia', 'mimium', 'alert1', 'broadlink', 'ampere computing', 'webee', 'amd advanced micro devices', 'crank software', 'xiaomi mi', 'carepredict', 'tesla', 'everynet', 'wintotek', 'petsafe', 'nokia health', 'nanoleaf', 'tago', 'zooz', 'leverege', 'attabox', 'vinli', 'yale', 'xiaomi corporation', 'smartbox', 'cropx', 'aaeon', 'abode smart security', 'avidbots', 'archos', 'linx technologies', 'halo home', 'jetstream', 'telit communications', 'dimonoff', 'tagoio', 'amcrest technologies', 'real time automation', 'resideo technologies', 'foghorn systems', 'borgwarner', 'mydevices cayenne', 'd-link corporation', 'logic monitor', 'vorto technologies', 'calamp', 'eden innovations', 'plume', 'konica minolta', 'wind river', 'mycroft ai', 'c3 iot', 'slamphome', 'nordic semiconductor', 'breezometer', 'pelion', 'izon', 'acer', 'arccos golf', 'parakweet', 'petcube bites', 'nest protect', 'siemens ag', 'netfoundry', 'cellint', 'orbi wifi system', 'cognitive systems', 'panasonic', 'apple', 'engenius', 'echelon corporation', 'august', 'isynaptic', 'belkin wemo', 'reolink', 'haiku home', 'eycott', 'bosch connected devices and solutions', 'netatmo', 'alioth', 'placepod', 'precisionhawk', 'skylark', 'humblenet', 'gopro', 'samsung', 'beddr', 'u-blox', 'yanzi networks', 'zigbee alliance', 'forgerock', 'adic', 'withings', 'revolar', 'awair', 'mitsubishi', 'cubicasa', 'urbiotica', 'homeboy', 'fitbit', 'ifttt', 'wirnet', 'sierra monitor', 'fluke', 'twisthink', 'geosatis', 'realwear', 'freewave technologies', 'guardtime', 'heracles', 'hms networks', 'lokigia', 'velux', 'swannone', 'insteon smart hub', 'thermador', 'ekahau', 'frontpoint', 'neato robotics', 'logitech harmony', 'attune systems', 'tapo', 'sigfox', 'cambium networks', 'braincube', 'optivolt labs', 'plume labs', 'reemo health', 'airnote', 'bybox', 'satechi', 'tagstand', 'arrow electronics', 'cloudleaf', 'notion', 'silicon cities', 'avnet', 'twilio', 'yale smart lock', 'canopy', 'gridit', 'first alert', 'quantela', 'level bolt smart lock', 'myq chamberlain', 'swidget', 'geotab', 'banpil', 'smartthings', 'cem sistemas', 'stream technologies', 'fujitsu ltd', 'elonics', 'flo', 'robin', 'puffin', 'revolectrix', 'itron', 'helium systems', 'dragon innovation', 'mixtile', 'alarmforce', 'crestron electronics', 'alertmedia', 'ezlo', 'maximus lighting', 'jablotron', 'node source', 'kinsa', 'combi-watch', 'irevo', 'cantara', 'pixtreeo', 'brinno', 'sensibo', 'oysta', 'bosch security systems', 'arable labs', 'the qt company', 'murata manufacturing', 'embr labs', 'asante', 'inspire home automation', 'mumi', 'canary connect inc', 'lenovo', 'mobotix', 'onlogic', 'skybell', 'reevoo', 'gemalto nv', 'decawave', 'geotraq', 'yale real living', 'skyworks solutions', 'computerline', 'very', 'nodon', 'atomation', 'arlo pro', 'ecosmart', 'netgear inc', 'kwikset', 'connected devices', 'device42', 'safehouse', 'capsules technologies', 'xfinity security camera', 'domintel', 'smartsense by digi', 'vivint', 'ciconia', 'kodiak controls', 'ember mug', 'nuki', 'anixter', 'wigwag', 'g7 networks', 'hidrate spark', 'kurio', 'finite state', 'mojio', 'ironyun', 'aeris communications', 'kasa smart', 'libelium', 'bsquared', 'arlo technologies', 'sensefinity', 'wize alliance', 'allterco robotics', 'lora alliance', 'airties', 'shelly smart home', 'sequans', 'lokin', 'axiros', 'daikin applied', 'internet of elephants', 'altro smart', 'linksprite', 'deako smart lighting', 'brinks home security', 'baldor electric company', 'hive', 'bafang', 'alexa', 'osram lightify', 'smartricity', 'ecowitt', 'deco lighting', 'nortek iot', 'evrythng', 'google cloud', 'oomi', 'feit electric', 'bluetooth sig', 'hiku', 'blinks labs', 'netrc', 'monnit', 'sengled smart light', 'anyka', 'petsafe smart feed', 'synaptics', 'knox', 'chamberlain', 'codex digital', 'keezel', 'ge link', 'telit', 'adi engineering', 'abb electric', 'pubnub', 'abbings', 'mosaic', 'spirent communications', 'wyzecam', 'icontrol networks', 'march networks', 'ewelink', 'reson ai', 'hubitat', 'combined smartware', 'kaadas', 'netro', 'cleverpet', 't-mobile', 'noria', 'experion', 'sensi', 'jjplus', 'maryville technologies', 'nexia home intelligence', 'clearcenter', 'yeelight', 'sublink', 'kingston', 'develco', 'bustec', 'solair', 'belwith products', 'switchbee', 'ankuoo neo', 'samsung artik', 'autodesk', 'radius networks', 'covi', 'arcturus networks', 'kobold', 'control4', 'angeleye', 'atmos home', 'win semiconductor', 'wifi hifi', 'clover flex', 'microsoft azure iot', 'espressif systems', 'apple homepod', 'quuppa', 'hitachi', 'dojo labs', 'opto 22', 'zipato', 'uprtek', 'puma electronics', 'arlo security light', 'jinya', 'dingz', 'famoco', 'q-see', 'telldus', 'cradlepoint', 'optimize', 'wulian', 'bitsensing', 'sap', 'kartell', 'foscam', 'emporia energy', 'yi technology', 'abiba systems', 'aromacare', 'bluestone apps', 'comet', 'adi', 'samsung smart home', 'panda', 'plum', 'soundtouch', 'aqara', 'equiptest', 'otto', 'silicon valley innovation labs', 'octonion', 'weenect', 'digitalstrom', 'iqor', 'opensprinkler', 'authometion', 'energenie', 'motosafety', 'chgeek', 'unabiz', 'xiaomi', 'tibbo', 'bolt iot', 'linksense', 'moxa', 'reposit power', 'smartdry', 'aspen technology', 'ultraloq', 'metralabs', 'cityzenith', 'livongo', 'apple homekit', 'finder', 'aclara', 'vitalhub', 'arrayent inc', 'ivideon', 'logitech harmony hub', 'mystrom', 'phyn', 'visionect', 'adlink technology inc', 'omnivision technologies', 'bloomsky', 'eltako', 'lumada', 'dadi', 'microsemi', 'invoxia', 'tablo', 'lorex', 'quantifi', 'netronix', 'sepio products', 'zenput', 'onelink', 'nortek security  control', 'sensenuts', 'simcam', 'alc', 'nokia', 'oylo', 'tracknet', 'askey', 'sunhokey', 'samsung research america', 'link labs', 'harman international industries inc', 'imagination technologies', 'brain child electronic', 'dahua technology', 'harman connected services', 'analog devices', 'wistron neweb corporation', 'oracle', 'azeti networks ag', 'huzza', 'ecozy', 'nanit', 'assa abloy', 'bricker', 'z-wave', 'brydge', 'freewave', 'amby', 'thingsonair', 'ecovacs', 'att', 'cagebot', 'distech controls', 'smartcar', 'hello', 'tempdrop', 'cisco systems inc', 'google home mini', 'disruptive technologies', 'heathzenith', 'treasure data', 'beaglebone', 'axiomtek', 'lilo', 'edimax', 'moen', 'mymixtape', 'jumperrific', 'level lock', 'gateways', 'kwikset kevo', 'alibaba', 'klevio', 'nest labs', 'hive home', 'floome', 'wyze labs', 'razor scooter', 'proximetry', 'fluentai', 'bytelight', 'lizards247', 'lutron', 'advantech', 'telkonet', 'belkin international inc', 'apixio', 'kazoo', 'veho', 'digital gadgets', 'elecom', 'digi-key electronics', 'mediatek', 'cylon', 'sigmadots', 'konke', 'xtel wireless', 'tektelic', 'intuitive', 'lupus electronics', 'syniverse', 'adtran', 'argenox technologies', 'hisilicon', 'tp-link', 'simply nuc', 'thermoworks', 'electric imp', 'conair', 'insta elektro', 'belkin', 'garmin ltd', 'nanoleaf smarter series', 'celcius', 'bobcat miner', 'covr', 'censis technologies', 'bosch sensortec', 'signify', 'artik', 'nimbelink', 'telia', 'aferon', 'harmony living', 'ingenico group', 'ubiquiti', 'vivotek', 'schneider electric se', 'nokia bell labs', 'digital lumens', 'hornbill', 'kawantech', 'petsafe smart pet feeder', 'f-secure', 'develco products', 'cisco', 'particle industries', 'orbcomm', 'kepler', 'fluor', 'wattstopper', 'lumos', 'pella insynctive', 'bae systems', 'libellium', 'letsclap', 'wink lookout', 'kangaroo', 'innominds', 'tenvis', 'bitdefender', 'nyce', 'micron technology', 'bosch group', 'piper', 'cree', 'element14', 'honeywell home', 'particle', 'baumer', 'tend insights', 'broadcom corporation', 'envodas', 'digi international inc', 'jarden consumer solutions', 'buddy technologies', 'asustek computer inc', 'bosch rexroth ag', 'inspur', 'iotas', 'misfit', 'astrocast', 'particleio', 'iot diagnostics', 'cavius', 'etherdyne technologies', 'kmc controls', 'sensolus', 'giza systems', 'ubi', 'auma', 'samsung sds', 'esco', 'jennings technology', 'senseguard', 'bocom', 'hydrawise', 'neos', 'foos', 'rigado', 'boltsmith', 'roost', 'oakter', 'losant', 'bithium', 'sensorup', 'myq', 'monolithic power systems', 'oracle corporation', 'seecontrol', 'connectm', 'amazon echo', 'abb', 'ecovent', 'iluv', 'copperhorse', 'silvair', 'netapp', 'tridium', 'chirp', 'xilinx', 'meural', 'doorbird', 'smart wrappers', 'tulip interfaces', 'gooloo', 'tovala', 'dell technologies', 'dreem', 'grid connect', 'virscient', 'buddy', 'tapo smart home', 'kuna', 'linksys velop', 'dialog semiconductor', 'built', 'ezviz smart security', 'havells', 'carnegie', 'ubee', 'tellabs', 'nest', 'openremote', 'practically', 'greenpeak technologies', 'cavium inc', 'alertme', 'johnson controls international plc', 'dojo', 'ihome', 'kwikset smart lock', 'actron air', 'lockstate', 'butterfly network', 'hisense', 'home8', 'vera smart home control', 'harman international', 'anafata', 'brilliant smart home', 'clair', 'spirent', 'picarro', 'amcrest security', 'aquaseca', 'nucleus', 'vintank', 'mimosa networks', 'neonode', 'johnson controls', 'eve', 'nortek security', 'claroty', 'bosch iot suite', 'iluv creative technology', 'smartika', 'encell technology', 'smarteef', 'wallyhome', 'ilumi', 'roku', 'eufy security', 'essity', 'mesh systems', 'senet', 'deep sentinel', 'unidesa', 'patron', 'abode home security', 'advantech bb smartworx', 'axient', 'lametric', 'predix', 'oort', 'allwinner technology', 'birdi', 'google nest', 'atmio', 'motorola', 'altizon systems', 'cleverfit', 'honeybee robotics', 'thinkeco', 'mnubo', 'qardio', 'secure system', 'qorvo', 'yi', 'anaplan', 'cozify', 'enocean', 'swann', 'tapt', 'intel', 'casambi', 'microsoft corporation', 'kakirush', 'sweepr', 'actility', 'scyfer', 'moo', 'belimo', 'ubisense', 'dropcam', 'chylzira', 'piper nv', 'inseego', 'sengled', 'pure storage', 'ring', 'mycroft', 'bosch smart home', 'riverbed technology', 'gigantum', 'jungle ai', 'alea labs', 'lisnr', 'altiux innovations', 'interlogix', 'orvibo', 'sony corporation', 'tektelic communications', 'beetel', 'comarch', 'e-cobot', 'koubachi', 'superpedestrian', 'airboxlab', 'bigclown', 'ge lighting', 'blues wireless', 'rakwireless', 'heimvision', 'loft', 'owl home exploits', 'mistral solutions', 'microsemi corporation', 'indesit', 'elk products', 'abb robotics', 'smart switch by leviton', 'rockwell automation', 'grid connect inc', 'netscout', 'flo-pod', 'xiaomi smart home', 'teribear', 'inexsmart', 'loop labs', 'virtuosys', 'swift sensors', 'ibm watson', 'tantan', 'relayrio', 'huawei technologies co ltd', 'elgato eve', 'sonos inc', 'forescout', 'sengled element', 'hologramio', 'playsurface', 'canary connect', 'vesternet', 'avegant', 'zebra technologies', 'panda security', 'harman international industries', 'eidogo', 'teoma', 'sharx security', 'astro', 'azeti networks', 'lynky', 'arkessa', 'fujitsu', 'coogi systems', 'ibm corporation', 'seagate', 'mainflux', 'baidu', 'deuta controls', 'hivemq', 'oneevent', 'arccos', 'irobot', 'machnation', 'honda', 'totaltrax', 'moen smart water', 'atomi', 'igloohome', 'honeywell smart thermostat', 'hpe', 'poncho technology', 'adafruit', 'maxeye technologies', 'vtech', 'broker', 'papago', 'senseware', 'fathom', 'sewio', 'estimote', 'laird connectivity', 'sensegiz', 'actian', 'amazon', 'galaxycore shanghai', 'taoglas', 'swarm technologies', 'wiz', 'verizon communications inc', 'egiaudio', 'verizon', 'adapt iot', 'prodea', 'smartplant', 'eyelevelai', 'securifi almond', 'allied telesis', 'sightmachine', 'leak detector', 'darwinremote', 'thingerio', 'enable build', 'kuna smart home', 'lutron electronics', 'sugr cube', 'bttn', 'logitech', 'roku inc', 'dewertokin', 'openpath', 'mihome', 'cavium', 'xirgo technologies', 'firstbuild', 'bisonai', 'orbit b-hyve', 'kp smart', 'advabta', 'lantronix', 'particle industries inc', 'moeco', 'latham  watkins', 'profalux', 'noon home', 'miroco', 'distec', 'bullguard', 'ambient weather', 'tibbo systems', 'dell inc', 'abb ltd', 'avnet inc', '8power', 'roborock', 'abb group', 'sylvania', 'kontron', 'circle home plus', 'globe electric', 'uniquify', 'visiotic', 'curb energy', 'elster', 'conpot', 'nec', 'augury', 'xfinity home', 'foobot', 'kore wireless', 'leedarson', 'multitech', 'cradlepoint ericsson', 'gogoro', 'seebo', 'cartasite', 'resinio', 'iotium', 'climax technology', 'kensho', 'neurio technologies', 'viotel', 'autoio technology', 'sichert', 'wink hub 2', 'scandit', 'tttech', 'jasper technologies', 'acer inc', 'panasonic corporation', 'arrayent', 'belden', 'acuity brands', 'cypress semiconductor', 'toshiba corporation', 'wyze cam', 'qualcomm', 'august smart lock', 'altis labs', 'software ag', 'flolive', 'evolve controls', 'visiconn', 'sense driver', 'biostarks', 'arccos caddie', 'moment', 'mobike', 'ninja blocks', 'capgemini', 'garmin', 'coresystems', 'climate', 'tytocare', 'relayr', 'bodymedia', 'toshiba', 'greenwave systems', 'eve systems', 'ghost', 'nest iq cam', 'benq corporation', 'levoit', 'ayyeka', 'arqiva', 'insta', 'nodegrid', 'akaso', 'mindsphere siemens', 'altec lansing', 'medtronic', 'telensa', 'aptilo networks', 'mediatek inc', 'cleverciti systems', 'broadcom', 'pervasive displays', 'brainstorm technologies', 'pentair', 'cirrus logic', 'google', 'beon home', 'onwardehs', 'google home', 'markforged', 'bang  olufsen', 'uhuru', 'sensative', 'ardex technology co ltd', 'ruuvitag', 'fictiv', 'gira', 'intermatic', 'yale smart locks', 'opensensors', 'dfharmony', 'energate', 'sodaq', '42gears mobility systems', 'owlet', 'lab126 inc', 'enphase energy', 'brainscope', 'ams ag', 'lowpowerlab', 'butterflymx', 'synopsys', 'moocow', 'tuya', 'android things', 'texas instruments', 'smartfrog', 'nebia', 'epropertycare', 'rapid7', 'flir systems', 'hq software', 'clearscale', 'withings home', 'rachio', 'fanstel', 'senndir', 'meater', 'ember', 'campus life', 'aranet', 'resideo', 'ptc', 'fathym', 'bellkin', 'arduino', 'tencent', 'razor labs', 'tp-link smart bulb', 'kuna systems', 'amphenol', 'darkhawk', 'alfred', 'scarlett', 'reakt environmental monitoring', 'multitech systems', 'chamberlain myq', 'airvantage', 'kaiter', 'poorna', 'samsara', 'adtran inc', 'bespoon', 'd-link', 'maxim integrated', 'beam labs', 'jumpcloud', 'sequans communications', 'bluflux', 'analog devices inc', 'phillips hue smart light', 'idevices llc', 'bsquare corporation', 'tuya smart', 'iosafe', 'oco', 'ecobee smartthermostat', 'express logic', 'cybervision', 'qwerty', 'neurio', 'ray iot', 'general electric', 'state automation', 'prodea systems', 'plume design', 'taphome', 'sharky', 'tile', 'netgear', 'eurotech inc', 'pod group', 'adaro optics', 'cayin technology', 'glow', 'usens', 'aetheros', 'ayla networks', 'wiliot', 'orcam', 'bevywise', 'bituni', 'joneca corporation', 'radarbot', 'polaroid', 'nebula', 'capstone connected', 'litmus automation', 'greeniq', 'lefant', 'freescale semiconductor', 'altair smartworks', 'agt international', 'magic home', 'halo wearables', 'elsevier labs', 'schlage', 'exalents', 'vera', 'huawei', 'legrand wattstopper', 'hiku labs', 'cybus', 'ibm', 'vivint smart home', 'eaton', 'anova', 'bigass fans', 'nozomi networks', 'eagle eye networks', 'flume', 'element', 'kaelo', 'guardzilla', 'kasa', 'intellectsoft', 'aetherworks', 'neura', 'lifesmart', 'toky', 'nooie', 'jibo', 'celeno', 'smappee', 'aqara smart home', 'zerynth', 'greensync', 'cumuliot', 'espressif', 'laird', 'denso', 'open bionics', 'renesas', 'davra networks', 'adero', 'link-tap'}

#final_manufacturers_list = coordinator.coordinate()
print("Final List of IoT Manufacturers:")
print(final_manufacturers_list)

# Save the final list to a file
with open('iot_manufacturers_list.txt', 'w') as file:
    for manufacturer in final_manufacturers_list:
        file.write(f"{manufacturer}\n")



# Function to read and standardize the list from a file
def read_and_standardize_list_from_file(filename):
    with open(filename, 'r') as file:
        return [standardize_name(line.strip()) for line in file.readlines()]

# Function to standardize the name by removing non-alphanumeric characters and converting to lowercase
def standardize_name(name):
    return re.sub(r'[^a-zA-Z0-9\s-]', '', name).lower()

# Read the final list of IoT manufacturers from the LLM file
final_manufacturers_list = read_and_standardize_list_from_file('iot_manufacturers_list.txt')

# Read the test list from our manual file
test_list = list(set(read_and_standardize_list_from_file('vendors_list_updated.csv')))

# Check if the final list is comprehensive
missing_manufacturers = [manufacturer for manufacturer in test_list if not any(manufacturer in vendor or difflib.SequenceMatcher(None, manufacturer, vendor).ratio() > 0.95 for vendor in final_manufacturers_list)]
# Output the results
if missing_manufacturers:
    print("The final list is missing the following IoT manufacturers:")
    print(missing_manufacturers)
    print(len(missing_manufacturers))
else:
    print("The final list is comprehensive and includes all manufacturers from the test list.")
